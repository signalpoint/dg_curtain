var dg_curtain=new dg.Module;dg.modules.dg_curtain=dg_curtain,dg._curtains={},dg.theme_curtain=function(t){t._attributes.id||(t._attributes.id=dg.userPassword());var e=t._attributes.id;t._attributes.class.push("curtain");var r=t._open?t._open:{},n=r.button?r.button:{};n._attributes||(n._attributes={}),n._attributes.onclick||(n._attributes.onclick="dg._curtainClick(this, 'open')"),n._attributes.for||(n._attributes.for=e),dg._curtains[e]=t;var i=dg._curtains[e];return dg._curtainBtnWrapOpen(i)+dg._curtainButtonRender(n,i,"open")+dg._curtainBtnWrapClose(i)},dg._curtainBtnWrapOpen=function(t){var e=t._button_wrapper?t._button_wrapper:null;return e?(dg.elementAttributesInit(e),e._format||(e._format="div"),e._attributes.id="curtain-btn-wrapper-"+t._attributes.id,t._button_wrapper=e,"<"+e._format+" "+dg.attributes(e._attributes)+">"):""},dg._curtainBtnWrapClose=function(t){return t._button_wrapper?"</"+t._button_wrapper._format+">":""},dg._curtainButtonRender=function(t,e,r){var n=t._type?t._type:"link",i=t._text?t._text:"open"==r?"+":"-";return"link"==n?dg.l(i,null,t):dg.b(i,t)},dg._curtainClick=function(t,e){var r=t.getAttribute("for"),n=dg._curtains[r],i=n._panel,a="open"==e?"close":"open",u="_"+e,o="_"+a;n[u].before&&n[u].before(t,n);var s=null;if(!i){var d=n[o]?n[o]:{},_=d.button?d.button:{};_._attributes||(_._attributes={}),_._attributes.onclick||(_._attributes.onclick="dg._curtainClick(this, '"+a+"')"),_._attributes.for||(_._attributes.for=r);var l=document.createElement("div");l.innerHTML=dg._curtainButtonRender(_,n,a),s=l.firstChild,t.parentNode.replaceChild(s,t)}if("open"==e){var c=document.getElementById(r);if(c){var b=document.getElementById(r);i?b.style.width="250px":b.style.display="block"}else{i&&n._attributes.class.push("side-panel",n._panel.side?"side-panel-"+n._panel.side:"side-panel-left");var p=n._format?variables._format:"div";l=document.createElement("div"),l.innerHTML="<"+p+" "+dg.attributes(n._attributes)+"></"+p+">",s?s.parentNode.insertBefore(l.firstChild,s.nextSibling):t.parentNode.insertBefore(l.firstChild,t.nextSibling);var g=dg.render(n._fill());if(i){var f=n._close?n._close:{},m=f.button?f.button:{};m._attributes||(m._attributes={}),m._attributes.onclick||(m._attributes.onclick="dg._curtainClick(this, 'close')"),m._attributes.for||(m._attributes.for=r),g=dg._curtainButtonRender(m,n,"close")+g,dg._postRender.push(function(){setTimeout(function(){document.getElementById(r).style.width="250px"},50)})}document.getElementById(r).innerHTML="open"==e?g:"",dg.runPostRenders()}}else{var b=document.getElementById(r);i?b.style.width="0":b.style.display="none"}n[u].after&&setTimeout(function(){n[u].after(i?t:s,n)},1)};